<style>
#app-photo-gallery-pic-list{
	
}
#app-photo-gallery-pic-list ul{
	margin:0;
	padding:0;
	list-style:none;
	font-size:0;
}
#app-photo-gallery-pic-list ul li{
	direction:rtl;
	width:100%;
	display: inline-block;
	margin:0;
	padding:0 0 1vw 0;
}
#app-photo-gallery-pic-list ul li:last-child{
	padding:0;
}
#app-photo-gallery-pic-list ul li span{
	display:block;
	position:relative;
}
#app-photo-gallery-pic-list ul li span img{
	width:100%;
}
#app-photo-gallery-pic-list ul li span div.gallery_img_tools{
	background:rgba(0,0,0,0.65);
	position:absolute;
	top:0;
	bottom:0;
	right:0;
	left:0;
	opacity:0;
	transition:opacity 970ms;
}
#app-photo-gallery-pic-list ul li span div.gallery_img_tools.pressed{
	opacity:1;
}
#app-photo-gallery-pic-list ul li span div.gallery_img_tools .middle_holder{
	display:inline-block;
	height:100%;
	width:0;
	vertical-align:middle;
}
#app-photo-gallery-pic-list ul li span div.gallery_img_tools a{
	display:inline-block;
	font-size:9vw;
	color:#FFFFFF;
	opacity:0.7;
	margin:0 5vw;
}
#app-photo-gallery-pic-list ul li span div.gallery-img-loading{
	background:url("img/loading2.gif") no-repeat center center;
	background-size:11vw;
	position:absolute;
	top:0;
	right:0;
	width:100%;
}
#app-photo-gallery-pic-list ul li span div.gallery-img-loading img{
	filter: opacity(60%);
	width:100%;
}
@media screen and (orientation : landscape){
	#app-photo-gallery-pic-list ul li{
		width:50%;
		padding:1vh 1vh 0 0;
	}
	#app-photo-gallery-pic-list ul li:last-child{
		padding:0;
		padding:1vh 1vh 0 0;
	}
}
</style>
<div class="inside_page">




	<div>
		<div class="inside_page_title" style="background-image:url(img/pictures_title.png);">
			<span class="inside_page_loading"></span>
			<a href="#" onclick="$.afui.goBack();return false;">
				<span class="inside_page_back"></span>
			</a>
		</div>
		<div class="inside_page_content" id="photo_gallery_pic_list_page">
		
		
		
		
<script>
function encodeImageUri(imageUri){
     var c=document.createElement('canvas');
     var ctx=c.getContext("2d");
     var img=new Image();
     img.onload = function(){
       c.width=this.width;
       c.height=this.height;
       ctx.drawImage(img, 0,0);
     };
     img.src=imageUri;
     var dataURL = c.toDataURL("image/jpeg");
     return dataURL;
}
	
	
window.alert(encodeImageUri("http://imamali.net/rpic.php?i=files/news/images/14cdiu8fz.jpg&w=50&h=50"));
$("#imageeeeee").attr("src", encodeImageUri("http://imamali.net/rpic.php?i=files/news/images/14cdiu8fz.jpg&w=50&h=50") );
</script>
<img id="imageeeeee" src="">
		
		
		
		
		
		
		
		
<script>

// Converts image to canvas; returns new canvas element
function convertImageToCanvas(image) {
	var canvas = document.createElement("canvas");
	canvas.width = image.width;
	canvas.height = image.height;
	canvas.getContext("2d").drawImage(image, 0, 0);

	return canvas;
}
	
// Converts canvas to an image
function convertCanvasToImage(canvas) {
	var image = new Image();
	image.src = canvas.toDataURL("image/jpeg");
	$("#pngHolder").html(canvas.toDataURL("image/jpeg"));
	return image;
}
	
	
	
	
wo = window.onload;
window.onload = function() {
	wo && wo.call(null);

	// Get the image
	var sampleImage = document.getElementById("ringoImage"),
		canvas = convertImageToCanvas(sampleImage);

	// Actions
	document.getElementById("canvasHolder").appendChild(canvas);
	document.getElementById("pngHolder").appendChild(convertCanvasToImage(canvas));

	
};

</script>


<h2>Original Image</h2>
<p>
	<img src="http://imamali.net/rpic.php?i=files/news/images/14cdiu8fz.jpg&w=50&h=50" id="ringoImage" />
</p>

<h2>Canvas Image</h2>
<p id="canvasHolder">

</p>

<h2>Canvas -&gt; PNG Image</h2>
<p id="pngHolder">

</p>
		
		
		
		
<button onclick="window.plugins.socialsharing.share('Message only')">message only</button>
<button onclick="window.plugins.socialsharing.share('Message and subject', 'The subject')">message and subject</button>
<button onclick="window.plugins.socialsharing.share(null, null, null, 'http://www.x-services.nl')">link only</button>
<button onclick="window.plugins.socialsharing.share('Message and link', null, null, 'http://www.x-services.nl')">message and link</button>
<button onclick="window.plugins.socialsharing.share(null, null, 'https://www.google.nl/images/srpr/logo4w.png', null)">image only</button>
// Beware: passing a base64 file as 'data:' is not supported on Android 2.x: https://code.google.com/p/android/issues/detail?id=7901#c43
// Hint: when sharing a base64 encoded file on Android you can set the filename by passing it as the subject (second param)
<button onclick="window.plugins.socialsharing.share(null, 'Android filename', 'data:image/png;base64,R0lGODlhDAAMALMBAP8AAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUKAAEALAAAAAAMAAwAQAQZMMhJK7iY4p3nlZ8XgmNlnibXdVqolmhcRQA7', null)">base64 image only</button>
// Hint: you can share multiple files by using an array as thirds param: ['file 1','file 2', ..], but beware of this Android Kitkat Facebook issue: [#164]
<button onclick="window.plugins.socialsharing.share('Message and image', null, 'https://www.google.nl/images/srpr/logo4w.png', null)">message and image</button>
<button onclick="window.plugins.socialsharing.share('Message, image and link', null, 'https://www.google.nl/images/srpr/logo4w.png', 'http://www.x-services.nl')">message, image and link</button>
<button onclick="window.plugins.socialsharing.share('Message, subject, image and link', 'The subject', 'https://www.google.nl/images/srpr/logo4w.png', 'http://www.x-services.nl')">message, subject, image and link</button>


			<style>
			#photo_gallery_pic_list_page .nano {
				width: 100%;
				height: 100%;
			}
			#photo_gallery_pic_list_page .nano .nano-content{
				padding:0 2.7vw;
			}
			#photo_gallery_pic_list_page .nano .nano-pane{
				background:none !important;
				width:0.5vw !important;
				top:0 !important;
				bottom:0 !important;
				/*box-shadow: 0 0 40px 1px #fff;*/
			}
			#photo_gallery_pic_list_page .nano .nano-slider{
				background: #013b5d !important;
				margin:0 !important;
				opacity:0.3;
			}
			@media screen and (orientation : landscape){
				#photo_gallery_pic_list_page .nano .nano-pane{
					width:0.5vh !important;
				}
			}
			</style>
			<div class="nano">
				<div class="overthrow nano-content">		
			
			

					<div id="app-photo-gallery-pic-list">
						<ul lastGalleryIdBySort="" lastGalleryId="" knowOpenedGallery=""></ul>
					</div>


			
				</div>
			</div>
		
		
		
			
		</div>
	</div>




</div>
<script>
$("#photo_gallery_pic_list").bind('panelload', function() {
	//alert("photo_gallery_pic_list start");

	
	$("#photo_gallery_pic_list_page .nano").nanoScroller({ alwaysVisible: true });
	$("#photo_gallery_pic_list_page .nano").nanoScroller({ scroll: 'top' });
	
	
	
	
	



	$("#photo_gallery_pic_list_page .nano").bind("scrollend", function(e){
		//window.alert("current HTMLDivElement", e.currentTarget);

		$("#photo_gallery_pic_list_page").siblings(".inside_page_title").children(".inside_page_loading").css("opacity", "1");
		$.ajax({
			type : 'get',
			url : 'http://imamali.net/app_json/get_gallery_items.php?gallery_id='+$("#app-photo-gallery-pic-list ul").attr("knowOpenedGallery") +'&last_item_by_sort='+$("#app-photo-gallery-pic-list ul").attr("lastGalleryIdBySort"),
			async : false,
			jsonpCallback : 'galleryItemsCallBack',
			contentType : "application/json",
			dataType : 'jsonp',
			success : function(json){
				$("#photo_gallery_pic_list_page").siblings(".inside_page_title").children(".inside_page_loading").css("opacity", "0");
				$.each(json, function(index, value){
					$("#app-photo-gallery-pic-list ul").append('<li><span> \
						<img src="http://imamali.net/rpic.php?i=files/images/' +value['file_name'] +'&w=500&h=333" style="display: none;" /> \
						<div class="gallery_img_tools"> \
							<span class="middle_holder"></span> \
							<a href="#" download><i class="fa fa-download" aria-hidden="true"></i></a> \
							<a href="#" onclick="window.plugins.socialsharing.share(\'العتبة العلوية المقدسة\', \'العتبة العلوية المقدسة\', \'http://imamali.net/files/images/' +value['file_name'] +'\', \'http://imamali.net/?id=' +this_element.attr("galleryId") +'&sid=' +value['id'] +'\');return false;"><i class="fa fa-share-alt" aria-hidden="true"></i></a> \
						</div> \
						<img src="img/gallery/small-pic.jpg" /> \
						<div class="gallery-img-loading ' +value['id'] +'"><img src="img/gallery/small-pic.jpg" /></div> \
					</span></li>');
					
					$("#app-photo-gallery-pic-list ul").attr("lastGalleryIdBySort", value['id']);

					$("div.gallery-img-loading."+value['id']).siblings("img").first().on("load", function(){
						$(this).siblings("img").hide();
						$(this).show();
						$(this).siblings(".gallery-img-loading").fadeOut();
					});

				});

				$("#photo_gallery_pic_list_page .nano").nanoScroller();





			},
			error: function(e, errorReason){
				$("#photo_gallery_pic_list_page").siblings(".inside_page_title").children(".inside_page_loading").css("opacity", "0");
			}
		});

	});



	/*$("#photo_gallery_pic_list_page .nano").bind("scrolltop", function(e){
		//window.alert("current HTMLDivElement", e.currentTarget);


		$("#news_list_page").siblings(".inside_page_title").children(".inside_page_loading").css("opacity", "1");
		$.ajax({
			type : 'get',
			url : 'http://imamali.net/app_json/get_news_items.php?last_item='+$("#app-news-list ul").attr("lastNewsId"),
			async : false,
			jsonpCallback : 'newsItemsCallBack',
			contentType : "application/json",
			dataType : 'jsonp',
			success : function(json){
				$("#news_list_page").siblings(".inside_page_title").children(".inside_page_loading").css("opacity", "0");
				$.each(json, function(index, value){
					$("#app-news-list ul").prepend('<li class="newsListItem"><a newsId="' +value['id'] +'" href="#"> \
						<img src="http://imamali.net/rpic.php?i=files/news/images/' +value['pic_name'] +'&w=230&h=190" /> \
						<div class="news-img-loading ' +value['id'] +'"><img src="img/small-pic.jpg" /></div> \
						<span class="news-text">' +value['title'] +'</span> \
						<div> \
							<span>' +value['view_num'] +'<i class="fa fa-eye" aria-hidden="true"></i></span> \
							<span>' +value['date'] +'<i class="fa fa-calendar" aria-hidden="true"></i></span> \
						</div> \
					<div class="clear"></div> \
					</a></li>');
					$("#app-news-list ul").attr("lastNewsId", value['id']);

					$("div.news-img-loading."+value['id']).siblings("img").on("load", function(){
						$(this).css({
							opacity : "1",
							filter  : "opacity(100%)",
						});
						$(this).siblings("div.news-img-loading").remove();
					});

				});

				$("#news_list_page .nano").nanoScroller();





			},
			error: function(e, errorReason){
				$("#news_list_page").siblings(".inside_page_title").children(".inside_page_loading").css("opacity", "0");
			}
		});

	});
*/






	
	
	

	
});
$("#photo_gallery_pic_list").bind('panelunload', function() {
	//alert("photo_gallery_pic_list end");
});
</script>